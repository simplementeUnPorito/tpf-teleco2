#include <IRremote.h>

IRsend irsend;  // versión vieja: NO recibe parámetros

const int khz = 38;

uint16_t frame_on[] = {
  8950,4400, 600,1650,600,1600,600,500,600,500,600,500,600,500,
  600,1650,600,1600,600,1650,600,1600,600,1650,
  600,500,600,500,600,500,600,500,
  600,1600,600,500,600,500,600,500,600,500,600,500,
  600,500,600,500,600,500,600,500,600,500,
  600,500,600,500,600,500,600,500,600,500,
  600,500,600,1650,600,500,600,1600,600,500,
  600,500,600,500,600,500,600,500,600,500
};

uint16_t frame_on_short[] = {
  600,500,600,500,600,500,600,500,600,500,600,1650,
  600,1600,600,1650,600,1600,600,500,600,500,600,500,
  600,500,600,500,600,500,600,500,600,500
};

uint16_t frame_off[] = {
  8950,4350, 550,1650,600,1600,550,550,600,500,600,450,600,500,
  600,1650,600,1550,600,1650,550,1600,600,1650,
  550,550,600,450,600,500,600,500,
  600,1600,550,500,600,500,600,500,600,500,550,500,
  600,1600,600,1650,500,1650,600,500,
  600,500,550,500,550,550,600,500,600,500,
  600,500,550,500,600,500,600,500,
  600,500,600,500,600,500
};

uint16_t frame_off_short[] = {
  600,500,600,500,600,500,600,500,600,500,600,1650,
  600,1600,600,1650,600,1600,600,500,600,500,600,500,
  600,500,600,500,600,500
};

void setup() {
  Serial.begin(115200);
  Serial.println("Enviador IR listo (IRremote 1.x)");
}

void loop() {

  Serial.println("Enviando ON...");
  irsend.sendRaw(frame_on, sizeof(frame_on)/2, khz);
  delay(30);
  irsend.sendRaw(frame_on_short, sizeof(frame_on_short)/2, khz);
  delay(2000);

  Serial.println("Enviando OFF...");
  irsend.sendRaw(frame_off, sizeof(frame_off)/2, khz);
  delay(30);
  irsend.sendRaw(frame_off_short, sizeof(frame_off_short)/2, khz);
  delay(2000);
}
